<!-- @author James Andrade, Jan 27,2019
@author Jessica Moffatt
-->
<div class="sidebar">
  <app-project-sidebar #sideBar></app-project-sidebar>
</div>
<div class="content_view">
    <mat-tab-group animationDuration="200ms" (selectedTabChange)="tabEvent($event)">
      <mat-tab label="Project">
        <div class="project_view">
          <ng-template [ngIf]="isProjectSelected()">
            <mat-card class="project_edit_card">
              <mat-card-content>
              <form #editProjectForm="ngForm">
                <mat-form-field  id="project">
                  <input matInput #editProjectName
                         placeholder="Project Name"
                         [formControl]="projectNameControl">
                </mat-form-field>
                <mat-form-field id="client">
                  <input matInput #editProjectClient
                         placeholder="Client"
                         [formControl]="projectClientControl">
                    <mat-option *ngFor="let c of this.clientService.clients.getValue()" [value]="c.name">
                      {{c.name}}
                    </mat-option>
                </mat-form-field>
                <br/>

                <mat-form-field>
                  <mat-select #editProjectManagerId placeholder="Project Manager"
                              [value]="this.getSelectedProject().projectManagerId">
                    <mat-option [value]="-1">None</mat-option>
                    <mat-option *ngFor="let u of this.userAccountService.userSubject | async" [value]="u.id">
                      {{u.firstName}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                    {{projectService.getSelectedProject().id.match(projectService.regExp) ? 'Account ID' : 'Account Manager'}}"
                </mat-form-field>
                <br/>

                <mat-form-field>
                  <input matInput placeholder="Billing Rate" #editProjectBillingRate
                         type="number"
                         min="0.00"
                         [formControl]="projectBillingControl">
                  <span matPrefix>$&nbsp;</span>
                </mat-form-field>
                <br/>

                <mat-form-field>
                  <input matInput type="number" #editProjectBudget
                         placeholder="Budget Total"
                         min="0.00"
                         [formControl]="projectBudgetControl">
                  <span matPrefix>$&nbsp;</span>
                </mat-form-field>
                <br/>

                Budget Report
                <app-budget-report></app-budget-report>

                <button mat-flat-button class="manage_cancel_btn" (click)="cancel()">
                  Cancel
                </button>
                <button mat-flat-button class="manage_save_btn" (click)="save()">
                  Save
                </button>
                <button mat-flat-button class="manage_delete_btn" (click)="openDeleteDialog()">
                  Delete
                </button>
              </form>
              </mat-card-content>
            </mat-card>

          </ng-template>
        </div>
        <app-project-member-list></app-project-member-list>
        <br>

        <app-expense-list></app-expense-list>
      </mat-tab>
      <mat-tab label="Billable Hour Report">
        <app-billable-hour-report></app-billable-hour-report>
      </mat-tab>
      <mat-tab #dumpTab label="Data Dump Report" *ngIf="this.signInService.navList['create_project']">
        <app-data-dump-report #dataDumpReport></app-data-dump-report>
      </mat-tab>
    </mat-tab-group>
</div>


