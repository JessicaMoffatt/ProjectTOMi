<!--
@author Iliya Kiritchkov
@version 1.0
-->

<form>
  <table>
    <tr>
      <td>
        <mat-form-field>
          <input matInput placeholder="First Name" [formControl]="userAccountFirstNameControl" value="{{userAccount.firstName}}"
               [errorStateMatcher]="userAccountNameMatcher">
          <mat-error *ngIf="userAccountFirstNameControl.hasError('required') && !userAccountFirstNameControl.hasError('pattern')">First name is <strong>required</strong></mat-error>
          <mat-error *ngIf="userAccountFirstNameControl.hasError('pattern')">Please enter a valid name</mat-error>
        </mat-form-field>
      </td>
      <td>
        <mat-form-field>
          <input matInput placeholder="Last Name" [formControl]="userAccountLastNameControl" value="{{userAccount.lastName}}"
                 [errorStateMatcher]="userAccountNameMatcher">
          <mat-error *ngIf="userAccountLastNameControl.hasError('required') && !userAccountLastNameControl.hasError('pattern')">Last name is <strong>required</strong></mat-error>
          <mat-error *ngIf="userAccountLastNameControl.hasError('pattern')">Please enter a valid name</mat-error>
        </mat-form-field>
      </td>
      <td>
        <button mat-raised-button color="primary">Save</button>
      </td>
    </tr>
    <tr>
      <td>
        <mat-form-field>
          <input matInput placeholder="Email" [formControl]="userAccountEmailControl" value="{{userAccount.email}}"
                 [errorStateMatcher]="userAccountEmailCatcher">
          <mat-error *ngIf="userAccountEmailControl.hasError('required') && !userAccountEmailControl.hasError('email') && !userAccountEmailControl.hasError('pattern')">Email is <strong>required</strong></mat-error>
          <mat-error *ngIf="userAccountEmailControl.hasError('email') || userAccountEmailControl.hasError('pattern')">Please enter a valid Gmail address</mat-error>
        </mat-form-field>
      </td>
      <td>
        <button mat-raised-button color="accent">Cancel</button>
      </td>
    </tr>
    <tr>
      <mat-form-field>
        <input matInput placeholder="Salaried Rate" [formControl]="userAccountRateControl" value="{{(userAccount.salariedRate/100).toFixed(2)}}"
               [errorStateMatcher]="userAccountRateCatcher">
        <mat-error *ngIf="userAccountRateControl.hasError('required') && !userAccountRateControl.hasError('min')">Salaried rate is <strong>required</strong></mat-error>
        <mat-error *ngIf="userAccountRateControl.hasError('min')">Please enter a positive rate</mat-error>
      </mat-form-field>
    </tr>
    <tr>
      <td>
        <mat-checkbox [checked]="userAccount.admin">
          Admin
        </mat-checkbox>
      </td>
      <td>
        <mat-checkbox [checked]="userAccount.programDirector">
          Program Director
        </mat-checkbox>
      </td>
      <td>
        <button mat-raised-button color="warn">Delete</button>
      </td>
    </tr>
  </table>
</form>


<div [ngClass]="'edit_user_account_container'">
  <div [ngClass]="'user_account_wrapper'">
  <span>
    <label for="edit_user_account_first_name">First Name</label>
    <input #editUserFirstName id="edit_user_account_first_name" value="{{userAccount.firstName}}"
           placeholder="First Name" style="width:20em">
    <label for="edit_user_account_last_name">Last Name</label>
    <input #editUserLastName id="edit_user_account_last_name" value="{{userAccount.lastName}}"
           placeholder="Last Name" style="width:20em">
  </span>
    <span>
    <label for="edit_user_account_email">Email</label>
    <input #editUserEmail id="edit_user_account_email" value="{{userAccount.email}}" placeholder="jsmith@gmail.com"
           style="width: 20em">
  </span>
    <span>
    <label for="edit_user_account_salary">Rate</label>
    <input #editUserSalariedRate type="number" min="0" id="edit_user_account_salary"
           value="{{(userAccount.salariedRate/100).toFixed(2)}}" placeholder="0.00"
           style="width: 20em">
  </span>
    <span>
    <label for="edit_user_account_team">Team</label>

    <select id="edit_user_account_team" #editUserTeamId>
      <option *ngIf="userAccount.teamId === -1" value="-1" [selected]>None</option>
      <option *ngIf="userAccount.teamId !== -1" value="-1">None</option>
      <option *ngFor="let team of teamService.teamsObservable" [value]="team.id" [selected]="userAccount.teamId === team.id">{{team.teamName}}</option>
    </select>
  <span>
    <label for="edit_user_account_program_director{{userAccount.id}}">Program Director</label>
    <input #editUserProgramDirector id="edit_user_account_program_director{{userAccount.id}}" type="checkbox" [checked]="userAccount.programDirector">
  </span>
  <span>
    <label for="edit_user_account_admin{{userAccount.id}}">Admin</label>
    <input #editUserAdmin id="edit_user_account_admin{{userAccount.id}}" type="checkbox" [checked]="userAccount.admin">
  </span>
  </span>
    <span [ngClass]="['btn', 'edit_btn']" (click)="save()">SAVE</span>
    <span [ngClass]="['btn', 'delete_btn']" (click)="cancel()">CANCEL</span>
  </div>
</div>
